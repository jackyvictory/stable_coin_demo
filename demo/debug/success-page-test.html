<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Success Page Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-button {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            color: white;
            background-color: #007bff;
        }
        
        .test-button:hover {
            background-color: #0056b3;
        }
        
        .test-button.success {
            background-color: #28a745;
        }
        
        .test-button.warning {
            background-color: #ffc107;
            color: #000;
        }
        
        .test-button.danger {
            background-color: #dc3545;
        }
        
        .blockchain-info {
            width: 100%;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 15px;
        }
        
        .blockchain-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: #e9ecef;
            border-bottom: 1px solid #dee2e6;
            cursor: pointer;
        }
        
        .blockchain-title {
            margin: 0;
            color: #495057;
            font-size: 16px;
            font-weight: bold;
        }
        
        .blockchain-details {
            padding: 0;
        }
        
        .blockchain-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .blockchain-item:last-child {
            border-bottom: none;
        }
        
        .blockchain-label {
            font-size: 14px;
            color: #6c757d;
            font-weight: 500;
            min-width: 140px;
        }
        
        .blockchain-value {
            font-size: 14px;
            color: #495057;
            font-family: 'Courier New', monospace;
            text-align: right;
        }
        
        .blockchain-value.address {
            color: #28a745;
            font-weight: 500;
        }
        
        .blockchain-value.hash {
            color: #007bff;
            font-weight: 500;
        }
        
        .blockchain-value.network {
            color: #6f42c1;
            font-weight: bold;
            font-family: inherit;
        }
        
        .blockchain-value.amount {
            color: #dc3545;
            font-weight: bold;
        }
        
        .log-container {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h2>ğŸ§ª æ”¯ä»˜æˆåŠŸé¡µé¢æµ‹è¯•</h2>
        <p>æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸé¡µé¢çš„æ•°æ®åŠ è½½å’Œæ˜¾ç¤ºè¿‡ç¨‹ï¼Œè¯Šæ–­ Blockchain Info æ˜¾ç¤º N/A çš„é—®é¢˜</p>
        
        <!-- æµ‹è¯•æŒ‰é’® -->
        <div>
            <button class="test-button success" onclick="simulateNormalPayment()">æ¨¡æ‹Ÿæ­£å¸¸æ”¯ä»˜</button>
            <button class="test-button success" onclick="simulateWebSocketPayment()">æ¨¡æ‹Ÿ WebSocket æ”¯ä»˜</button>
            <button class="test-button warning" onclick="simulatePartialData()">æ¨¡æ‹Ÿéƒ¨åˆ†æ•°æ®</button>
            <button class="test-button danger" onclick="simulateNoData()">æ¨¡æ‹Ÿæ— æ•°æ®</button>
            <button class="test-button" onclick="clearSessionStorage()">æ¸…é™¤ SessionStorage</button>
            <button class="test-button" onclick="checkSessionStorage()">æ£€æŸ¥ SessionStorage</button>
        </div>
        
        <!-- Blockchain Info æ˜¾ç¤º -->
        <div class="blockchain-info">
            <div class="blockchain-header" onclick="toggleBlockchainInfo()">
                <h3 class="blockchain-title">ğŸ”— Blockchain Info</h3>
                <button style="background: none; border: none; cursor: pointer;">
                    <span id="toggle-icon">â–¼</span>
                </button>
            </div>
            <div class="blockchain-details" id="blockchain-details" style="display: block;">
                <div class="blockchain-item">
                    <span class="blockchain-label">Blockchain Name:</span>
                    <span class="blockchain-value network" id="blockchain-name">Loading...</span>
                </div>
                <div class="blockchain-item">
                    <span class="blockchain-label">Transaction Hash:</span>
                    <span class="blockchain-value hash" id="blockchain-tx-hash">Loading...</span>
                </div>
                <div class="blockchain-item">
                    <span class="blockchain-label">Block Number:</span>
                    <span class="blockchain-value" id="blockchain-block-number">Loading...</span>
                </div>
                <div class="blockchain-item">
                    <span class="blockchain-label">From Address:</span>
                    <span class="blockchain-value address" id="blockchain-from-addr">Loading...</span>
                </div>
                <div class="blockchain-item">
                    <span class="blockchain-label">To Address:</span>
                    <span class="blockchain-value address" id="blockchain-to-addr">Loading...</span>
                </div>
                <div class="blockchain-item">
                    <span class="blockchain-label">Contract Address:</span>
                    <span class="blockchain-value address" id="blockchain-contract-addr">Loading...</span>
                </div>
                <div class="blockchain-item">
                    <span class="blockchain-label">Amount & Currency:</span>
                    <span class="blockchain-value amount" id="blockchain-amount">Loading...</span>
                </div>
            </div>
        </div>
        
        <!-- æ—¥å¿—æ˜¾ç¤º -->
        <div class="log-container" id="log-container">
            é¡µé¢åŠ è½½å®Œæˆï¼Œç‚¹å‡»æµ‹è¯•æŒ‰é’®å¼€å§‹...
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let paymentData = null;
        
        // æ—¥å¿—å‡½æ•°
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            const logContainer = document.getElementById('log-container');
            const logEntry = `[${timestamp}] ${message}\n`;
            logContainer.textContent += logEntry;
            logContainer.scrollTop = logContainer.scrollHeight;
            console.log(message);
        }
        
        // æ¨¡æ‹Ÿæ­£å¸¸æ”¯ä»˜æ•°æ®
        function simulateNormalPayment() {
            log('ğŸ”„ æ¨¡æ‹Ÿæ­£å¸¸æ”¯ä»˜æ•°æ®...');
            
            const testData = {
                product: 'rice',
                price: 10.00,
                paymentId: 'PAY-TEST-001',
                selectedPayment: {
                    symbol: 'USDT',
                    name: 'Tether USD',
                    contractAddress: '0x55d398326f99059fF775485246999027B3197955'
                },
                selectedNetwork: {
                    symbol: 'BSC',
                    name: 'BNB Smart Chain',
                    chainId: 56
                },
                walletAddress: '0xe27577B0e3920cE35f100f66430de0108cb78a04',
                timestamp: Date.now(),
                confirmedAt: Date.now()
            };
            
            // ä¿å­˜åˆ° sessionStorage
            sessionStorage.setItem('paymentData', JSON.stringify(testData));
            log('âœ… æ­£å¸¸æ”¯ä»˜æ•°æ®å·²ä¿å­˜åˆ° sessionStorage');
            
            // é‡æ–°åŠ è½½æ•°æ®å¹¶æ˜¾ç¤º
            loadAndDisplayData();
        }
        
        // æ¨¡æ‹Ÿ WebSocket æ”¯ä»˜æ•°æ®
        function simulateWebSocketPayment() {
            log('ğŸ”„ æ¨¡æ‹Ÿ WebSocket æ”¯ä»˜æ•°æ®...');
            
            const testData = {
                product: 'rice',
                price: 10.00,
                paymentId: 'PAY-WS-001',
                selectedPayment: {
                    symbol: 'USDT',
                    name: 'Tether USD',
                    contractAddress: '0x55d398326f99059fF775485246999027B3197955'
                },
                selectedNetwork: {
                    symbol: 'BSC',
                    name: 'BNB Smart Chain',
                    chainId: 56
                },
                walletAddress: '0xe27577B0e3920cE35f100f66430de0108cb78a04',
                timestamp: Date.now(),
                confirmedAt: Date.now(),
                confirmationData: {
                    transactionHash: '0x1a2b3c4d5e6f7890abcdef1234567890abcdef1234567890abcdef1234567890',
                    blockNumber: 12345678,
                    fromAddress: '0xabcdef1234567890abcdef1234567890abcdef12',
                    toAddress: '0xe27577B0e3920cE35f100f66430de0108cb78a04',
                    contractAddress: '0x55d398326f99059fF775485246999027B3197955',
                    amount: 10.00,
                    tokenSymbol: 'USDT',
                    blockTimestamp: Date.now(),
                    networkName: 'BNB Smart Chain (BSC)'
                }
            };
            
            // ä¿å­˜åˆ° sessionStorage
            sessionStorage.setItem('paymentData', JSON.stringify(testData));
            log('âœ… WebSocket æ”¯ä»˜æ•°æ®å·²ä¿å­˜åˆ° sessionStorage');
            
            // é‡æ–°åŠ è½½æ•°æ®å¹¶æ˜¾ç¤º
            loadAndDisplayData();
        }
        
        // æ¨¡æ‹Ÿéƒ¨åˆ†æ•°æ®
        function simulatePartialData() {
            log('ğŸ”„ æ¨¡æ‹Ÿéƒ¨åˆ†æ•°æ®...');
            
            const testData = {
                product: 'rice',
                price: 5.00,
                paymentId: 'PAY-PARTIAL-001',
                selectedPayment: { symbol: 'USDT' },
                selectedNetwork: { name: 'BSC' },
                timestamp: Date.now()
            };
            
            // ä¿å­˜åˆ° sessionStorage
            sessionStorage.setItem('paymentData', JSON.stringify(testData));
            log('âœ… éƒ¨åˆ†æ•°æ®å·²ä¿å­˜åˆ° sessionStorage');
            
            // é‡æ–°åŠ è½½æ•°æ®å¹¶æ˜¾ç¤º
            loadAndDisplayData();
        }
        
        // æ¨¡æ‹Ÿæ— æ•°æ®
        function simulateNoData() {
            log('ğŸ”„ æ¨¡æ‹Ÿæ— æ•°æ®æƒ…å†µ...');
            
            // æ¸…é™¤ sessionStorage
            sessionStorage.removeItem('paymentData');
            log('âŒ sessionStorage å·²æ¸…é™¤');
            
            // é‡æ–°åŠ è½½æ•°æ®å¹¶æ˜¾ç¤º
            loadAndDisplayData();
        }
        
        // æ¸…é™¤ SessionStorage
        function clearSessionStorage() {
            sessionStorage.removeItem('paymentData');
            log('ğŸ—‘ï¸ SessionStorage å·²æ¸…é™¤');
            
            // é‡ç½®æ˜¾ç¤º
            resetDisplay();
        }
        
        // æ£€æŸ¥ SessionStorage
        function checkSessionStorage() {
            const data = sessionStorage.getItem('paymentData');
            if (data) {
                log('ğŸ“‹ SessionStorage ä¸­çš„æ•°æ®:');
                log(JSON.stringify(JSON.parse(data), null, 2));
            } else {
                log('âŒ SessionStorage ä¸­æ²¡æœ‰ paymentData');
            }
        }
        
        // åŠ è½½å¹¶æ˜¾ç¤ºæ•°æ®
        function loadAndDisplayData() {
            log('ğŸ”„ å¼€å§‹åŠ è½½å’Œæ˜¾ç¤ºæ•°æ®...');
            
            // æ¨¡æ‹Ÿ success-ws.js ä¸­çš„ loadPaymentData å‡½æ•°
            const data = sessionStorage.getItem('paymentData');
            if (data) {
                paymentData = JSON.parse(data);
                log('âœ… æ”¯ä»˜æ•°æ®åŠ è½½æˆåŠŸ');
                log(`ğŸ“‹ æ”¯ä»˜æ•°æ®: ${JSON.stringify(paymentData, null, 2)}`);
            } else {
                log('âŒ æ²¡æœ‰æ‰¾åˆ°æ”¯ä»˜æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
                paymentData = {
                    product: 'unknown',
                    price: 0,
                    paymentId: 'N/A',
                    selectedPayment: { symbol: 'N/A', name: 'N/A' },
                    selectedNetwork: { symbol: 'N/A', name: 'N/A' },
                    timestamp: Date.now(),
                    confirmedAt: Date.now(),
                    monitoringMode: 'WebSocket'
                };
            }
            
            // æ˜¾ç¤ºåŒºå—é“¾ä¿¡æ¯
            displayBlockchainInfo();
        }
        
        // é‡ç½®æ˜¾ç¤º
        function resetDisplay() {
            const elements = [
                'blockchain-name', 'blockchain-tx-hash', 'blockchain-block-number',
                'blockchain-from-addr', 'blockchain-to-addr', 'blockchain-contract-addr', 'blockchain-amount'
            ];
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = 'Loading...';
                    element.className = 'blockchain-value';
                }
            });
        }
        
        // æ˜¾ç¤ºåŒºå—é“¾ä¿¡æ¯ (å¤åˆ¶è‡ª success-ws.js å¹¶ç®€åŒ–)
        function displayBlockchainInfo() {
            log('ğŸ”— å¼€å§‹æ˜¾ç¤ºåŒºå—é“¾ä¿¡æ¯...');
            
            if (!paymentData) {
                log('âŒ æ²¡æœ‰æ”¯ä»˜æ•°æ®å¯ç”¨');
                return;
            }
            
            // è·å–æ‰€æœ‰åŒºå—é“¾ä¿¡æ¯å…ƒç´ 
            const blockchainNameElement = document.getElementById('blockchain-name');
            const txHashElement = document.getElementById('blockchain-tx-hash');
            const blockNumberElement = document.getElementById('blockchain-block-number');
            const fromAddrElement = document.getElementById('blockchain-from-addr');
            const toAddrElement = document.getElementById('blockchain-to-addr');
            const contractAddrElement = document.getElementById('blockchain-contract-addr');
            const amountElement = document.getElementById('blockchain-amount');
            
            // ä»æ”¯ä»˜æ•°æ®ä¸­æå–åŒºå—é“¾ä¿¡æ¯
            let blockchainData = extractBlockchainData(paymentData);
            log('ğŸ”— æå–çš„åŒºå—é“¾æ•°æ®: ' + JSON.stringify(blockchainData, null, 2));
            
            // æ›´æ–°åŒºå—é“¾åç§°
            if (blockchainNameElement) {
                const networkName = getBlockchainName(paymentData);
                blockchainNameElement.textContent = networkName;
                blockchainNameElement.className = 'blockchain-value network';
                log('ğŸŒ ç½‘ç»œåç§°: ' + networkName);
            }
            
            // æ›´æ–°å„ä¸ªå­—æ®µ
            if (txHashElement) {
                const displayHash = blockchainData.transactionHash || 'N/A';
                txHashElement.textContent = displayHash;
                txHashElement.className = 'blockchain-value hash';
                log('ğŸ”— äº¤æ˜“å“ˆå¸Œ: ' + displayHash);
            }
            
            if (blockNumberElement) {
                const displayBlockNumber = blockchainData.blockNumber || 'N/A';
                blockNumberElement.textContent = displayBlockNumber;
                blockNumberElement.className = 'blockchain-value';
                log('ğŸ§± åŒºå—å·: ' + displayBlockNumber);
            }
            
            if (fromAddrElement) {
                const displayFromAddr = blockchainData.fromAddress || 'N/A';
                fromAddrElement.textContent = displayFromAddr;
                fromAddrElement.className = 'blockchain-value address';
                log('ğŸ“¤ å‘é€åœ°å€: ' + displayFromAddr);
            }
            
            if (toAddrElement) {
                const displayToAddr = blockchainData.toAddress || 'N/A';
                toAddrElement.textContent = displayToAddr;
                toAddrElement.className = 'blockchain-value address';
                log('ğŸ“¥ æ¥æ”¶åœ°å€: ' + displayToAddr);
            }
            
            if (contractAddrElement) {
                const displayContractAddr = blockchainData.contractAddress || 'N/A';
                contractAddrElement.textContent = displayContractAddr;
                contractAddrElement.className = 'blockchain-value address';
                log('ğŸ“„ åˆçº¦åœ°å€: ' + displayContractAddr);
            }
            
            if (amountElement) {
                const displayAmount = blockchainData.amountAndCurrency || 'N/A';
                amountElement.textContent = displayAmount;
                amountElement.className = 'blockchain-value amount';
                log('ğŸ’° é‡‘é¢: ' + displayAmount);
            }
            
            log('âœ… åŒºå—é“¾ä¿¡æ¯æ˜¾ç¤ºå®Œæˆ');
        }
        
        // ä»æ”¯ä»˜æ•°æ®ä¸­æå–åŒºå—é“¾ä¿¡æ¯ (ç®€åŒ–ç‰ˆ)
        function extractBlockchainData(paymentData) {
            log('ğŸ” å¼€å§‹æå–åŒºå—é“¾æ•°æ®...');
            
            const blockchainData = {
                transactionHash: null,
                fullTransactionHash: null,
                blockNumber: null,
                fromAddress: null,
                fullFromAddress: null,
                toAddress: null,
                fullToAddress: null,
                contractAddress: null,
                fullContractAddress: null,
                amountAndCurrency: null
            };
            
            // å°è¯•ä»ä¸åŒçš„æ•°æ®æºæå–ä¿¡æ¯
            let sourceData = null;
            
            // ä¼˜å…ˆä½¿ç”¨ confirmationDataï¼ˆWebSocket ç›‘å¬åˆ°çš„æ•°æ®ï¼‰
            if (paymentData.confirmationData) {
                sourceData = paymentData.confirmationData;
                log('âœ… ä½¿ç”¨ confirmationData ä½œä¸ºæ•°æ®æº');
            }
            // å…¶æ¬¡ä½¿ç”¨ç›´æ¥çš„æ”¯ä»˜æ•°æ®å­—æ®µ
            else if (paymentData.transactionHash || paymentData.blockNumber) {
                sourceData = paymentData;
                log('âœ… ä½¿ç”¨ paymentData ä½œä¸ºæ•°æ®æº');
            }
            // æœ€åå°è¯•ä» blockchainInfo å­—æ®µ
            else if (paymentData.blockchainInfo) {
                sourceData = paymentData.blockchainInfo;
                log('âœ… ä½¿ç”¨ blockchainInfo ä½œä¸ºæ•°æ®æº');
            } else {
                log('âš ï¸ æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„åŒºå—é“¾æ•°æ®æº');
            }
            
            if (sourceData) {
                log('ğŸ“‹ æºæ•°æ®: ' + JSON.stringify(sourceData, null, 2));
                
                // æå–å„ç§æ•°æ®...
                if (sourceData.transactionHash) {
                    blockchainData.fullTransactionHash = sourceData.transactionHash;
                    blockchainData.transactionHash = formatTransactionHash(sourceData.transactionHash);
                    log('ğŸ”— æ‰¾åˆ°äº¤æ˜“å“ˆå¸Œ: ' + sourceData.transactionHash);
                }
                
                if (sourceData.blockNumber) {
                    blockchainData.blockNumber = `#${sourceData.blockNumber}`;
                    log('ğŸ§± æ‰¾åˆ°åŒºå—å·: ' + sourceData.blockNumber);
                }
                
                if (sourceData.fromAddress) {
                    blockchainData.fullFromAddress = sourceData.fromAddress;
                    blockchainData.fromAddress = formatAddress(sourceData.fromAddress);
                    log('ğŸ“¤ æ‰¾åˆ°å‘é€åœ°å€: ' + sourceData.fromAddress);
                }
                
                if (sourceData.toAddress) {
                    blockchainData.fullToAddress = sourceData.toAddress;
                    blockchainData.toAddress = formatAddress(sourceData.toAddress);
                    log('ğŸ“¥ æ‰¾åˆ°æ¥æ”¶åœ°å€: ' + sourceData.toAddress);
                }
                
                if (sourceData.contractAddress) {
                    blockchainData.fullContractAddress = sourceData.contractAddress;
                    blockchainData.contractAddress = formatAddress(sourceData.contractAddress);
                    log('ğŸ“„ æ‰¾åˆ°åˆçº¦åœ°å€: ' + sourceData.contractAddress);
                }
                
                if (sourceData.amount && sourceData.tokenSymbol) {
                    blockchainData.amountAndCurrency = `${sourceData.amount} ${sourceData.tokenSymbol}`;
                    log('ğŸ’° æ‰¾åˆ°é‡‘é¢: ' + sourceData.amount + ' ' + sourceData.tokenSymbol);
                }
            }
            
            // å›é€€åˆ°æ”¯ä»˜æ•°æ®çš„åŸºæœ¬ä¿¡æ¯
            if (!blockchainData.toAddress && paymentData.walletAddress) {
                blockchainData.fullToAddress = paymentData.walletAddress;
                blockchainData.toAddress = formatAddress(paymentData.walletAddress);
                log('ğŸ“¥ ä½¿ç”¨é’±åŒ…åœ°å€ä½œä¸ºæ¥æ”¶åœ°å€: ' + paymentData.walletAddress);
            }
            
            if (!blockchainData.amountAndCurrency && paymentData.price && paymentData.selectedPayment?.symbol) {
                blockchainData.amountAndCurrency = `${paymentData.price} ${paymentData.selectedPayment.symbol}`;
                log('ğŸ’° ä½¿ç”¨æ”¯ä»˜æ•°æ®çš„é‡‘é¢: ' + paymentData.price + ' ' + paymentData.selectedPayment.symbol);
            }
            
            if (!blockchainData.contractAddress && paymentData.selectedPayment?.contractAddress) {
                blockchainData.fullContractAddress = paymentData.selectedPayment.contractAddress;
                blockchainData.contractAddress = formatAddress(paymentData.selectedPayment.contractAddress);
                log('ğŸ“„ ä½¿ç”¨æ”¯ä»˜æ•°æ®çš„åˆçº¦åœ°å€: ' + paymentData.selectedPayment.contractAddress);
            }
            
            log('âœ… åŒºå—é“¾æ•°æ®æå–å®Œæˆ');
            return blockchainData;
        }
        
        // è·å–åŒºå—é“¾åç§°
        function getBlockchainName(paymentData) {
            if (paymentData.selectedNetwork?.name) {
                return paymentData.selectedNetwork.name;
            }
            
            if (paymentData.confirmationData?.networkName) {
                return paymentData.confirmationData.networkName;
            }
            
            if (paymentData.selectedNetwork?.chainId) {
                const chainId = paymentData.selectedNetwork.chainId;
                switch (chainId) {
                    case 56: return 'BNB Smart Chain (BSC)';
                    case 1: return 'Ethereum Mainnet';
                    case 137: return 'Polygon';
                    case 43114: return 'Avalanche';
                    case 250: return 'Fantom';
                    default: return `Chain ID ${chainId}`;
                }
            }
            
            return 'BNB Smart Chain (BSC)';
        }
        
        // æ ¼å¼åŒ–äº¤æ˜“å“ˆå¸Œ
        function formatTransactionHash(hash) {
            if (!hash || hash === 'N/A') return 'N/A';
            if (hash.length <= 20) return hash;
            return `${hash.substring(0, 10)}...${hash.substring(hash.length - 6)}`;
        }
        
        // æ ¼å¼åŒ–åœ°å€
        function formatAddress(address) {
            if (!address || address === 'N/A') return 'N/A';
            if (address.length <= 20) return address;
            return `${address.substring(0, 8)}...${address.substring(address.length - 6)}`;
        }
        
        // åˆ‡æ¢æ˜¾ç¤º
        function toggleBlockchainInfo() {
            const details = document.getElementById('blockchain-details');
            const icon = document.getElementById('toggle-icon');
            
            if (details.style.display === 'none') {
                details.style.display = 'block';
                icon.textContent = 'â–¼';
            } else {
                details.style.display = 'none';
                icon.textContent = 'â–¶';
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', function() {
            log('ğŸš€ æ”¯ä»˜æˆåŠŸé¡µé¢æµ‹è¯•å·¥å…·å·²åŠ è½½');
            log('ğŸ’¡ ç‚¹å‡»æµ‹è¯•æŒ‰é’®æ¥æ¨¡æ‹Ÿä¸åŒçš„æ”¯ä»˜æ•°æ®æƒ…å†µ');
            
            // æ£€æŸ¥æ˜¯å¦æœ‰ç°æœ‰æ•°æ®
            checkSessionStorage();
        });
    </script>
</body>
</html>